<!doctype html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width">
<title>The Egua Programming Language</title>
<meta name=description content="Rocket is a web framework for the Rust
      programming language that makes it simple to write fast web applications
      without sacrificing flexibility or type safety.">
<meta name=author content="Lucas Pompeu and Heictor Costa">
<link href="https://fonts.googleapis.com/css?family=Proza+Libre:400,500" rel=stylesheet>
<link rel=stylesheet href=css/style.css media=all>
<link rel="icon" href="egua.png" type="image/x-icon">
<style media=screen>
    .clouds.back {
        background: transparent url(images/clouds-back.png) repeat
    }
    
    .clouds.front {
        background: transparent url(images/clouds-front.png) repeat-x
    }
    
    #logo {
        background-image: url(images/logo.png)
    }
    
    @media(max-width:870px) {
        #logo {
            background-image: url(images/logo-small.png)
        }
    }
    
    input#search-input {
        background-image: url(images/search-icon.svg)
    }
    
    .cancel-search {
        background: url(images/cancel-icon.svg) no-repeat center
    }
    
    .admonition.note .title {
        background-image: url(images/pencil-icon.svg)
    }
    
    .admonition.tip .title {
        background-image: url(images/star-icon.svg)
    }
    
    .admonition.warning .title {
        background-image: url(images/warning-icon.svg)
    }
</style>
<header>
    <div class="back clouds"></div>
    <div class="front clouds"></div>
    <div class=container><a id=logo href="/"><span>Rocket Homepage</span></a>
        <nav class=version-select><span onclick=toggleOptions()>v0.4 <i></i></span>
            <options><a href=v0-3.html>v0.3</a></options>
        </nav>
        <input type=checkbox id=toggle>
        <label for=toggle class=hamburger><span></span> <span></span> <span></span></label>
        <nav class=main><a href=overview.html>overview</a> <a href=guide.html>guide</a> <a href=api_subdomain/v0-4/rocket.html>api</a> <a href=news.html>news</a> <a href=https://github.com/SergioBenitez/Rocket/tree/v0.4>code</a></nav>
        <div class=centered>
            <h1>Overview</h1>
            <h4>A brief look at what makes Rocket special.</h4></div>
    </div>
</header>
<section class="tight dark">
    <main class=container>
        <h2 id=anatomy-of-a-rocket-application>Anatomy of a Rocket Application<a class=headerlink href=#anatomy-of-a-rocket-application title="perma link">#</a></h2>
        <p>Rocket applications are incredibly easy to write! Tab through the examples below to get a glimpse into how a Rocket application is structured.
            <div id=tabs-panel class=grid>
                <input type=radio name=tab-state id=routing checked>
                <input type=radio name=tab-state id=dynamic-params>
                <input type=radio name=tab-state id=handling-data>
                <input type=radio name=tab-state id=request-guards>
                <input type=radio name=tab-state id=responders>
                <input type=radio name=tab-state id=launching>
                <div class=tabs>
                    <label for=routing id=routing-tab class=tab><img src=images/routing-tab-icon.svg alt="Routing Icon"> Routing</label>
                    <label for=dynamic-params id=dynamic-params-tab class=tab><img src=images/dynamic-params-tab-icon.svg alt="Dynamic Params Icon"> Dynamic Params</label>
                    <label for=handling-data id=handling-data-tab class=tab><img src=images/handling-data-tab-icon.svg alt="Handling Data Icon"> Handling Data</label>
                    <label for=request-guards id=request-guards-tab class=tab><img src=images/request-guards-tab-icon.svg alt="Request Guards Icon"> Request Guards</label>
                    <label for=responders id=responders-tab class=tab><img src=images/responders-tab-icon.svg alt="Responders Icon"> Responders</label>
                    <label for=launching id=launching-tab class=tab><img src=images/launching-tab-icon.svg alt="Launching Icon"> Launching</label>
                </div>
                <div class="panels lighter-code">
                    <div id=routing-panel class=panel>
                        <p>Rocket's main task is to route incoming requests to the appropriate request handler using your application's declared routes. Routes are declared using Rocket's <em>route</em> attributes. The attribute describes the requests that match the route. The attribute is placed on top of a function that is the request handler for that route.
                            <p>As an example, consider the simple route below:
                                <table class="code hltable">
                                    <tr>
                                        <td class=linenos>
                                            <div class=linenodiv><pre>1
2
3
4</pre></div>
                                            <td class=code>
                                                <div class="code hl"><pre><span></span><span class=cp>#[get(</span><span class=s>"/"</span><span class=cp>)]</span><span class=w></span>
<span class=k>fn</span> <span class=nf>index</span><span class=p>()</span><span class=w> </span>-> <span class=kp>&</span><span class=nb>'static</span><span class=w> </span><span class=kt>str</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>   </span><span class=s>"Hello, world!"</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</pre></div>
                                </table>
                                <p>This route, named <code>index</code>, will match against incoming HTTP <code>GET</code> requests to the <code>/</code> path, the index. The request handler returns a string. Rocket will use the string as the body of a fully formed HTTP response.</div>
                    <div id=dynamic-params-panel class=panel>
                        <p>Rocket allows you to interpret segments of a request path dynamically. To illustrate, let's use the following route:
                            <table class="code hltable">
                                <tr>
                                    <td class=linenos>
                                        <div class=linenodiv><pre>1
2
3
4</pre></div>
                                        <td class=code>
                                            <div class="code hl"><pre><span></span><span class=cp>#[get(</span><span class=s>"/hello/&lt;name>/&lt;age>"</span><span class=cp>)]</span><span class=w></span>
<span class=k>fn</span> <span class=nf>hello</span><span class=p>(</span><span class=n>name</span>: <span class=nb>String</span><span class=p>,</span><span class=w> </span><span class=n>age</span>: <span class=kt>u8</span><span class=p>)</span><span class=w> </span>-> <span class=nb>String</span> <span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=n>format</span><span class=o>!</span><span class=p>(</span><span class=s>"Hello, {} year old named {}!"</span><span class=p>,</span><span class=w> </span><span class=n>age</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</pre></div>
                            </table>
                            <p>The <code>hello</code> route above matches two dynamic path segments declared inside brackets in the path: <code>&lt;name></code> and <code>&lt;age></code>. <em>Dynamic</em> means that the segment can be <em>any</em> value the end-user desires.
                                <p>Each dynamic parameter (<code>name</code> and <code>age</code>) must have a type, here <code>&str</code> and <code>u8</code>, respectively. Rocket will attempt to parse the string in the parameter's position in the path into that type. The route will only be called if parsing succeeds. To parse the string, Rocket uses the <a href=index.html>FromParam</a> trait, which you can implement for your own types!</div>
                    <div id=handling-data-panel class=panel>
                        <p>Request body data is handled in a special way in Rocket: via the <a href=index.html>FromData</a> trait. Any type that implements <code>FromData</code> can be derived from incoming body data. To tell Rocket that you're expecting request body data, the <code>data</code> route argument is used with the name of the parameter in the request handler:
                            <table class="code hltable">
                                <tr>
                                    <td class=linenos>
                                        <div class=linenodiv><pre>1
2
3
4</pre></div>
                                        <td class=code>
                                            <div class="code hl"><pre><span></span><span class=cp>#[post(</span><span class=s>"/login"</span><span class=cp>, data = </span><span class=s>"&lt;user_form>"</span><span class=cp>)]</span><span class=w></span>
<span class=k>fn</span> <span class=nf>login</span><span class=p>(</span><span class=n>user_form</span>: <span class=nc>Form</span><span class=o>&lt;</span><span class=n>UserLogin</span><span class=o>></span><span class=p>)</span><span class=w> </span>-> <span class=nb>String</span> <span class=p>{</span><span class=w></span>
<span class=w>   </span><span class=n>format</span><span class=o>!</span><span class=p>(</span><span class=s>"Hello, {}!"</span><span class=p>,</span><span class=w> </span><span class=n>user_form</span><span class=p>.</span><span class=n>name</span><span class=p>)</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</pre></div>
                            </table>
                            <p>The <code>login</code> route above says that it expects <code>data</code> of type <code>Form&lt;UserLogin></code> in the <code>user_form</code> parameter. The <a href=index.html>Form</a> type is a built-in Rocket type that knows how to parse web forms into structures. Rocket will automatically attempt to parse the request body into the <code>Form</code> and call the <code>login</code> handler if parsing succeeds. Other built-in <code>FromData</code> types include <a href=index.html><code>Data</code></a>, <a href=index.html><code>Json</code></a>, and <a href=index.html><code>Flash</code></a>.</div>
                    <div id=request-guards-panel class=panel>
                        <p>In addition to dynamic path and data parameters, request handlers can also contain a third type of parameter: <em>request guards</em>. Request guards aren't declared in the route attribute, and any number of them can appear in the request handler signature.
                            <p>Request guards <em>protect</em> the handler from running unless some set of conditions are met by the incoming request metadata. For instance, if you are writing an API that requires sensitive calls to be accompanied by an API key in the request header, Rocket can protect those calls via a custom <code>ApiKey</code> request guard:
                                <table class="code hltable">
                                    <tr>
                                        <td class=linenos>
                                            <div class=linenodiv><pre>1
2</pre></div>
                                            <td class=code>
                                                <div class="code hl"><pre><span></span><span class=cp>#[get(</span><span class=s>"/sensitive"</span><span class=cp>)]</span><span class=w></span>
<span class=k>fn</span> <span class=nf>sensitive</span><span class=p>(</span><span class=n>key</span>: <span class=nc>ApiKey</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>}</span><span class=w></span>
</pre></div>
                                </table>
                                <p><code>ApiKey</code> protects the <code>sensitive</code> handler from running incorrectly. In order for Rocket to call the <code>sensitive</code> handler, the <code>ApiKey</code> type needs to be derived through a <a href=index.html><code>FromRequest</code></a> implementation, which in this case, validates the API key header. Request guards are a powerful and unique Rocket concept; they centralize application policy and invariants through types.</div>
                    <div id=responders-panel class=panel>
                        <p>The return type of a request handler can be any type that implements <a href=index.html>Responder</a>:
                            <table class="code hltable">
                                <tr>
                                    <td class=linenos>
                                        <div class=linenodiv><pre>1
2</pre></div>
                                        <td class=code>
                                            <div class="code hl"><pre><span></span><span class=cp>#[get(</span><span class=s>"/"</span><span class=cp>)]</span><span class=w></span>
<span class=k>fn</span> <span class=nf>route</span><span class=p>()</span><span class=w> </span>-> <span class=nc>T</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>}</span><span class=w></span>
</pre></div>
                            </table>
                            <p>Above, T must implement <code>Responder</code>. Rocket implements <code>Responder</code> for many of the standard library types including <code>&str</code>, <code>String</code>, <code>File</code>, <code>Option</code>, and <code>Result</code>. Rocket also implements custom responders such as <a href=index.html>Redirect</a>, <a href=index.html>Flash</a>, and <a href=index.html>Template</a>.
                                <p>The task of a <code>Responder</code> is to generate a <a href=index.html><code>Response</code></a>, if possible. <code>Responder</code>s can fail with a status code. When they do, Rocket calls the corresponding error catcher, a <code>catch</code> route, which can be declared as follows:
                                    <table class="code hltable">
                                        <tr>
                                            <td class=linenos>
                                                <div class=linenodiv><pre>1
2</pre></div>
                                                <td class=code>
                                                    <div class="code hl"><pre><span></span><span class=cp>#[catch(404)]</span><span class=w></span>
<span class=k>fn</span> <span class=nf>not_found</span><span class=p>()</span><span class=w> </span>-> <span class=nc>T</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>}</span><span class=w></span>
</pre></div>
                                    </table>
                    </div>
                    <div id=launching-panel class=panel>
                        <p>Launching a Rocket application is the funnest part! For Rocket to begin dispatching requests to routes, the routes need to be <em>mounted</em>. After mounting, the application needs to be <em>launched</em>. These two steps, usually done in <code>main</code>, look like:
                            <table class="code hltable">
                                <tr>
                                    <td class=linenos>
                                        <div class=linenodiv><pre>1
2
3</pre></div>
                                        <td class=code>
                                            <div class="code hl"><pre><span></span><span class=n>rocket</span>::<span class=n>ignite</span><span class=p>()</span><span class=w></span>
<span class=w>   </span><span class=p>.</span><span class=n>mount</span><span class=p>(</span><span class=s>"/base"</span><span class=p>,</span><span class=w> </span><span class=n>routes</span><span class=o>!</span><span class=p>[</span><span class=n>index</span><span class=p>,</span><span class=w> </span><span class=n>another</span><span class=p>])</span><span class=w></span>
<span class=w>   </span><span class=p>.</span><span class=n>launch</span><span class=p>();</span><span class=w></span>
</pre></div>
                            </table>
                            <p>The <code>mount</code> call takes a base path and a set of routes via the <code>routes!</code> macro. The base path (<code>/base</code> above) is prepended to the path of every route in the list. This effectively namespaces the routes, allowing for easier composition.
                                <p>The <code>launch</code> call starts the server. In development, Rocket prints useful information to the console to let you know everything is okay.
                                    <table class="code hltable">
                                        <tr>
                                            <td class=linenos>
                                                <div class=linenodiv><pre>1</pre></div>
                                                <td class=code>
                                                    <div class="code hl"><pre><span></span>ðŸš€  Rocket has launched from http://localhost:8000
</pre></div>
                                    </table>
                    </div>
                </div>
            </div>
            <h2 id=how-rocket-works>How Rocket Works<a class=headerlink href=#how-rocket-works title="perma link">#</a></h2>
            <p>Every request received by a Rocket web application follows a simple 3-step process from request to response.
                <div class="grid work-step">
                    <div class="col no-flex center centered circle-container">
                        <div class="blue circle">1</div>
                        <h4>Validation</h4></div>
                    <div class="col blocky-code">
                        <p>First, Rocket validates a matching request by ensuring that all of the types in a given handler can be derived from the incoming request. If the types cannot be derived, the request is forwarded to the next matching route until a routeâ€™s types validate or there are no more routes to try. If all routes fail, a customizable <strong>404</strong> error is returned.
                            <table class="code hltable">
                                <tr>
                                    <td class=linenos>
                                        <div class=linenodiv><pre>1
2
3
4</pre></div>
                                        <td class=code>
                                            <div class="code hl"><pre><span></span><span class=cp>#[post(</span><span class=s>"/user"</span><span class=cp>, data = </span><span class=s>"&lt;new_user>"</span><span class=cp>)]</span><span class=w></span>
<span class=k>fn</span> <span class=nf>new_user</span><span class=p>(</span><span class=n>admin</span>: <span class=nc>AdminUser</span><span class=p>,</span><span class=w> </span><span class=n>new_user</span>: <span class=nc>Form</span><span class=o>&lt;</span><span class=n>User</span><span class=o>></span><span class=p>)</span><span class=w> </span>-> <span class=nc>T</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>   </span><span class=p>...</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</pre></div>
                            </table>
                            <p>For the <code>new_user</code> handler above to be called, the following conditions must hold:
                                <ul>
                                    <li>The request method must be <code>POST</code>.
                                        <li>The request path must be <code>/user</code>.
                                            <li>The request must contain <code>data</code> in its body.
                                                <li>The request metadata must authenticate an <code>AdminUser</code>.
                                                    <li>The request body must be a form that parses into a <code>User</code> struct.</ul>
                    </div>
                </div>
                <div class="grid work-step">
                    <div class="col no-flex center centered circle-container">
                        <div class="purple circle">2</div>
                        <h4>Processing</h4></div>
                    <div class="col blocky-code">
                        <p>Next, the request is processed by an arbitrary handler. This is where most of the business logic in an application resides, and the part of your applications youâ€™ll likely spend the most time writing. In Rocket, handlers are simply functions - thatâ€™s it! The only caveat is that the functionâ€™s return type must implement the <code>Responder</code> trait. The <code>new_user</code> function above is an example of a handler.</div>
                </div>
                <div class="grid work-step">
                    <div class="col no-flex center centered circle-container">
                        <div class="red circle">3</div>
                        <h4>Response</h4></div>
                    <div class="col blocky-code">
                        <p>Finally, Rocket responds to the client by transforming the return value of the handler into an HTTP response. The HTTP response generated from the returned value depends on the typeâ€™s specific <code>Responder</code> trait implementation.
                            <table class="code hltable">
                                <tr>
                                    <td class=linenos>
                                        <div class=linenodiv><pre>1</pre></div>
                                        <td class=code>
                                            <div class="code hl"><pre><span></span><span class=k>fn</span> <span class=nf>route</span><span class=p>()</span><span class=w> </span>-> <span class=nc>T</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=p>...</span><span class=w> </span><span class=p>}</span><span class=w></span>
</pre></div>
                            </table>
                            <p>If the function above is used as a handler, for instance, then the type <code>T</code> must implement <code>Responder</code>. Rocket provides many useful responder types out of the box. They include:
                                <ul>
                                    <li><code>Json&lt;T></code>: Serializes the structure T into JSON and returns it to the client.
                                        <li><code>Template</code>: Renders a template file and returns it to the client.
                                            <li><code>Redirect</code>: Returns a properly formatted HTTP redirect.
                                                <li><code>NamedFile</code>: Streams a given file to the client with the Content-Type taken from the fileâ€™s extension.
                                                    <li><code>Stream</code>: Streams data to the client from an arbitrary <code>Read</code> value.
                                                        <li>Many Primitive Types: <code>String</code>, <code>&str</code>, <code>File</code>, <code>Option</code>, <code>Result</code>, and others all implement the <code>Responder</code> trait.</ul>
                    </div>
                </div>
    </main>
</section>
<footer class=grid>
    <div class=container>
        <div class="col mobile-hide"><a href=https://sergio.bz>Â© 2016-2019 Sergio Benitez</a></div>
        <div class="col centered"><img src=images/logo-small.svg alt="Small Rocket Logo"></div>
        <div class="col text-right mobile-hide"><a href=#>BACK TO TOP Î”</a></div>
    </div>
</footer>
<script>
    function toggleOptions() {
        if (!(870 <= screen.width)) {
            var e = document.querySelector("nav.version-select options");
            e.style.display = "none" === e.style.display ? "block" : "none"
        }
    }
</script>
<script>
    ! function() {
        var r = null,
            u = 0,
            a = document.querySelector(".front.clouds"),
            c = document.querySelector(".back.clouds");
        window.requestAnimationFrame(function e(n) {
            if (r || (r = n), n - u < 50) window.requestAnimationFrame(e);
            else {
                var o = n - r,
                    t = o / 1e3 * 20,
                    i = o / 1e3 * 5;
                a.style.backgroundPositionX = -t + "px", c.style.backgroundPositionX = -i + "px", u = n, window.requestAnimationFrame(e)
            }
        })
    }()
</script>